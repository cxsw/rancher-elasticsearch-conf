# Generated by rancher-conf {{timestamp.Format "Jan 2, 2006 15:04"}}

bootstrap.memory_lock: true

discovery.zen.ping.unicast.hosts:
{{- $stack := self.Stack }}
{{- $cluster := service.Parent.Labels.GetValue "es.cluster.name" "-" }}
{{- range $service := whereLabelEquals "es.cluster.name" $cluster services }}
{{- if eq $service.Stack $stack }}
  - {{ .Name }}
{{- end }}
{{- end }}

{{ range $key, $value := service.Parent.Labels }}
{{- if eq (index (split $key ".") 0) "es" }}
{{ replace $key "es." "" 1 }}: {{ $value }}
{{- end }}
{{- end }}
